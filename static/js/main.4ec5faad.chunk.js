(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,n){e.exports=n(296)},168:function(e,t,n){},169:function(e,t,n){},194:function(e,t){},196:function(e,t){},234:function(e,t){},235:function(e,t){},296:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(155),c=n.n(o),i=(n(168),n(169),n(12)),s=n(6),u=n(162),l=[{en:"Title must not be empty",ru:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"},{en:"Content must not be empty",ru:"\u041a\u043e\u043d\u0442\u0435\u043d\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"},{en:"Bad news item ID",ru:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"},{en:"No token provided",ru:"\u0412 \u0437\u0430\u043f\u0440\u043e\u0441\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u043e\u043a\u0435\u043d"},{en:"Not authorized to view profile",ru:"\u041d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u043f\u0440\u043e\u0444\u0430\u0439\u043b\u0430"},{en:"Captcha is not passed",ru:"\u041d\u0435 \u0431\u044b\u043b\u0430 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u0430 Captcha"},{en:"Bad Google cliend ID",ru:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 Google Client ID"},{en:"Error on server while verifying token",ru:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u0442\u043e\u043a\u0435\u043d\u0430"},{en:"Bad credentials",ru:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430"},{en:"News item not found",ru:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"},{en:"Not authorized to edit this news item",ru:"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u044d\u0442\u043e\u0439 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"},{en:"Not authorized to delete this news item",ru:"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u044d\u0442\u043e\u0439 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"},{en:"User not found",ru:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"},{en:"User already exists",ru:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"},{en:"Password must contain at least 6 characters",ru:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},{en:"Password must not be empty",ru:"\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"},{en:"Username must not be empty",ru:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"},{en:"jwt expired",ru:"\u0422\u043e\u043a\u0435\u043d \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0443\u0441\u0442\u0430\u0440\u0435\u043b. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u043e\u0439\u0442\u0438 \u0435\u0449\u0435 \u0440\u0430\u0437"}],m=function(e){var t=l.find(function(t){return t.en===e});return t?t.ru:e},d="LOGIN_SUCCESS",p="LOGIN_FAILED",f="LOGOUT_SUCCESS",h="LOGOUT_FAILED",E="START_LOADING",g="GET_NEWS_SUCCESS",v="GET_NEWS_FAILED",b="GET_POST_SUCCESS",y="GET_POST_FAILED",w="EDIT_POST_SUCCESS",N="EDIT_POST_FAILED",O="ADD_POST_SUCCESS",S="ADD_POST_FAILED",k="DELETE_POST_SUCCESS",_="DELETE_POST_FAILED",I=n(301),j=Object(s.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(u.a)({},t.payload,{isAuth:!0});case f:return{userName:null,userId:null,token:null,googleToken:null,isAuth:!1};default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return t.payload.feeds;case b:return[t.payload.feed];default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:case y:case S:case N:case _:case p:case h:return t.payload.error||"\u041e\u043f\u0430\u043d\u044c\u043a\u0438.. \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :(";case g:case b:case O:case w:case k:case d:case f:case"@@redux-form/START_SUBMIT":case"@@redux-form/CHANGE":return!1;default:return e}},isLoading:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case E:return!0;default:return!1}},isDeleted:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k:return e.payload._id;default:return null}},form:I.a}),D=n(159),C=n(30),T=n.n(C),L=n(67),A=n.n(L),P="https://news-app-mihanik.herokuapp.com/api/v1",x=n(106);function U(){return{token:localStorage.getItem("token"),googleToken:localStorage.getItem("googleToken"),userName:localStorage.getItem("userName"),userId:localStorage.getItem("userId")}}function G(){return{type:E}}function M(e,t,n,a){return function(e,t,n,a){if(!e||!t||!n||!a)return!1;localStorage.setItem("token",e),localStorage.setItem("googleToken",t),localStorage.setItem("userName",n),localStorage.setItem("userId",a)}(e,t,n,a),T.a.defaults.headers.common["x-access-token"]=e,{type:d,payload:{token:e,googleToken:t,userName:n,userId:a}}}function F(e){return{type:p,payload:e}}function B(){return function(e){return e(G()),T.a.get("".concat(P,"/feeds")).then(function(t){return e((n=t.data,{type:g,payload:n}));var n}).catch(function(t){return e(function(e){return{type:v,payload:e}}(t))})}}function z(e){return function(t){return t(G()),T.a.get("".concat(P,"/feeds/").concat(e)).then(function(e){return t((n=e.data,{type:b,payload:n}));var n}).catch(function(e){return t(function(e){return{type:y,payload:e}}(e.response.data))})}}function R(e){return function(t){return t(G()),T.a.delete("".concat(P,"/feeds/").concat(e)).then(function(e){var n;t((n=e.data,{type:k,payload:n})),t(B())}).catch(function(e){return t(function(e){return{type:_,payload:e}}(e))})}}T.a.defaults.headers.common["x-access-token"]=U().token||null;n(294);var W,J,K=n(300),H=n(303),$=n(302),q=n(297),Q=n(22),V=n(23),X=n(25),Y=n(24),Z=n(26),ee=function(e){function t(){return Object(Q.a)(this,t),Object(X.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props.user;return e.isAuth?r.a.createElement("div",{className:"header-login"},r.a.createElement("span",null,"\u041f\u0440\u0438\u0432\u0435\u0442, ",r.a.createElement("b",null,e.userName),"!"),r.a.createElement("button",{onClick:this.props.signOut,className:"login-button"},"\u0412\u044b\u0439\u0442\u0438"),r.a.createElement(q.a,{to:"/news/add"},r.a.createElement("i",{className:"fas fa-plus add-icon",title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"}))):r.a.createElement("div",{className:"header-login"},r.a.createElement("button",{onClick:this.props.signIn,className:"login-button"},"\u0412\u043e\u0439\u0442\u0438"))}}]),t}(a.Component),te=Object(i.b)(function(e){return{user:e.user}},{signIn:function(){return function(e){return window.gapi.auth2.getAuthInstance().signIn({scope:"profile email"}).then(function(t){var n=t.getAuthResponse().id_token,a=t.getBasicProfile().getName();return T.a.post("".concat(P,"/auth/google"),{token:n}).then(function(t){var r=t.data.token,o=A.a.decode(r).id;e(M(r,n,a,o))}).catch(function(t){return e(F(t))})}).catch(function(t){return e(F(t))})}},signOut:function(){return function(e){return window.gapi.auth2.getAuthInstance().signOut().then(function(t){return e((localStorage.removeItem("token"),localStorage.removeItem("googleToken"),localStorage.removeItem("userName"),localStorage.removeItem("userId"),{type:f}))}).catch(function(t){return e(function(e){return{type:h,payload:e}}(t))})}}})(ee),ne=function(){return r.a.createElement("header",null,r.a.createElement("div",{className:"header-container"},r.a.createElement("div",{className:"header-title"},r.a.createElement(q.a,{to:"/news",title:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"},r.a.createElement("i",{className:"fas fa-home"}),r.a.createElement("b",null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"))),r.a.createElement(te,null)))},ae=function(){return r.a.createElement("footer",null,r.a.createElement("div",{className:"footer-container"},r.a.createElement("p",{className:"text-small"},"made by ",r.a.createElement("a",{href:"https://github.com/MikhailKarpov87/",target:"_blank",rel:"noopener noreferrer"},"MikhailKarpov87")),r.a.createElement("p",{className:"text-small"},r.a.createElement("a",{href:"https://maxpfrontend.ru/zametki/testovoe-zadanie-3/",target:"_blank",rel:"noopener noreferrer"},"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0417\u0430\u0434\u0430\u043d\u0438\u0435 3 by maxpfrontend"))))},re=function(e){function t(){return Object(Q.a)(this,t),Object(X.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.deletePost;return r.a.createElement("div",{className:"buttons"},r.a.createElement(q.a,{to:"/news/".concat(t,"/edit")},r.a.createElement("i",{className:"far fa-edit edit-icon"})),r.a.createElement("i",{className:"far fa-trash-alt delete-icon",onClick:function(){return window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?")&&n(t)}}))}}]),t}(a.Component),oe=Object(i.b)(null,{deletePost:R})(re),ce=function(e){var t=e.author,n=e.date;return r.a.createElement("div",{className:"post-info"},r.a.createElement("div",{className:"author-info"},r.a.createElement("i",{className:"fas fa-user-circle"}),t),r.a.createElement("div",{className:"date-info"},n))},ie=function(e){var t=e.id,n=e.title,a=e.content,o=e.author,c=e.touchDate,i=e.userIsAuthor,s=a.length>200?a.substr(0,200)+"...":a,u=new Date(c).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"});return r.a.createElement("div",{className:"post-container"},r.a.createElement("div",{className:"post-header"},r.a.createElement("div",{className:"post-title"},r.a.createElement(q.a,{to:"/news/".concat(t)},r.a.createElement("h3",null,n))),i&&r.a.createElement(oe,{id:t})),r.a.createElement(ce,{author:o,date:u}),r.a.createElement("div",{className:"post-body"},r.a.createElement("p",null,s)))},se=function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("i",{className:"fas fa-circle-notch fa-2x"}))},ue=function(e){var t=e.message||"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430";return r.a.createElement("div",{className:"message-container"},r.a.createElement("h3",null,t))},le=function(e){function t(){return Object(Q.a)(this,t),Object(X.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){this.props.getNews()}},{key:"render",value:function(){var e=this.props,t=e.news,n=e.user;return e.isLoading?r.a.createElement(se,null):t.length?r.a.createElement("div",{className:"content-container"},t.map(function(e){return r.a.createElement(ie,{id:e._id,key:e._id,title:e.title,content:e.content,author:e.creator.displayName,userIsAuthor:n.userId===e.creator._id,touchDate:e.createDate})})):r.a.createElement(ue,{message:"\u041d\u043e\u0432\u043e\u0441\u0442\u0435\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})}}]),t}(a.Component),me=Object(i.b)(function(e){return{user:e.user,news:e.news,isLoading:e.isLoading,isDeleted:e.isDeleted}},{getNews:B})(le),de=function(e){function t(){return Object(Q.a)(this,t),Object(X.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match;(0,e.getPost)(t.params.id)}},{key:"shouldComponentUpdate",value:function(e){return e.isDeleted===e.match.params.id&&e.history.push("/news"),!0}},{key:"render",value:function(){var e=this.props,t=e.match,n=e.news,a=e.error,o=e.isLoading,c=e.user,i=e.deletePost,s=e.history,u=t.params.id;if(o&&!a)return r.a.createElement(se,null);if(!n.find(function(e){return e._id===u})||a){var l="Bad news item ID"===a?"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438";return r.a.createElement(ue,{message:l})}var m=n.find(function(e){return e._id===u}),d=m._id,p=m.title,f=m.content,h=m.createDate,E=m.creator,g=new Date(h).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"});return r.a.createElement("div",{className:"content-container"},r.a.createElement("div",{className:"post-container"},r.a.createElement("div",{className:"post-header"},r.a.createElement("div",{className:"post-title"},r.a.createElement("h3",null,p)),c.userId===m.creator._id&&r.a.createElement(oe,{id:d,history:s})),r.a.createElement(ce,{author:E.displayName,date:g}),r.a.createElement("div",{className:"post-body"},r.a.createElement("p",null,f))),c.userId===m.creator._id&&r.a.createElement("div",{className:"bottom-buttons"},r.a.createElement(q.a,{to:"/news/".concat(d,"/edit")},r.a.createElement("button",{className:"edit-button"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),r.a.createElement("button",{onClick:function(){return window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?")&&i(u,s).then(function(e){return console.log(e)})},className:"delete-button"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}}]),t}(a.Component),pe=Object(i.b)(function(e){return{user:e.user,news:e.news,error:e.error,isLoading:e.isLoading,isDeleted:e.isDeleted}},{getPost:z,deletePost:R})(de),fe=n(299),he=n(298),Ee=function(e){return e?void 0:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"},ge=(W=6,function(e){var t=e.input,n=e.label,a=e.type,o=e.meta,c=o.touched,i=o.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",Object.assign({},t,{placeholder:n,type:a,className:"input-title"})),c&&i&&r.a.createElement("div",{className:"error-message"},i))}),ve=function(e){var t=e.input,n=e.label,a=e.meta,o=a.touched,c=a.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("textarea",Object.assign({},t,{placeholder:n,className:"input-content",rows:"10"})),o&&c&&r.a.createElement("div",{className:"error-message"},c))},be=function(e){function t(){return Object(Q.a)(this,t),Object(X.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,n=e.getPost,a=t.params.id;this.props.news.find(function(e){return e._id===a})||n(a)}},{key:"componentDidUpdate",value:function(e){var t=e.match,n=e.initialize,a=e.initialized,r=e.news.find(function(e){return e._id===t.params.id});!a&&r&&n(r)}},{key:"render",value:function(){var e=this.props,t=e.match.params.id,n=e.news,a=e.user,o=e.errorMessage,c=e.isLoading,i=e.handleSubmit,s=e.submitting,u=e.editPost,l=e.history;if(c)return r.a.createElement(se,null);if(!n.find(function(e){return e._id===t}))return r.a.createElement(ue,{message:"\u041d\u043e\u0432\u043e\u0441\u0442\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"});var d=n.find(function(e){return e._id===t});return a.isAuth&&a.userId===d.creator._id?r.a.createElement("div",{className:"content-container"},r.a.createElement("h2",null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"),r.a.createElement("form",{onSubmit:i(function(e){return u(d._id,e).then(function(e){return"EDIT_POST_SUCCESS"===e.type&&l.push("/news/".concat(t))})})},r.a.createElement("div",{className:"post-container"},r.a.createElement(fe.a,{component:ge,type:"text",name:"title",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",validate:Ee,key:"title"}),r.a.createElement(fe.a,{component:ve,name:"content",validate:Ee,key:"content"}),o&&r.a.createElement("div",{className:"error-message"},m(o))),r.a.createElement("div",{className:"bottom-buttons"},r.a.createElement("button",{type:"submit",className:"edit-button",disabled:s||o},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement(q.a,{to:"/news/".concat(d._id)},r.a.createElement("button",{className:"delete-button"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"))))):r.a.createElement(ue,{message:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435"})}}]),t}(a.Component),ye=Object(he.a)({form:"edit_form"})(be),we=Object(i.b)(function(e){return{user:e.user,news:e.news,errorMessage:e.error,isLoading:e.isLoading}},{getPost:z,editPost:function(e,t){return function(n){return n(G()),T.a.put("".concat(P,"/feeds/").concat(e),{title:t.title,content:t.content}).then(function(e){return n((t=e.data,{type:w,payload:t}));var t}).catch(function(e){throw n(function(e){return{type:N,payload:e}}(e.response.data)),new x.a({message:e.response.data})})}}})(ye),Ne=function(e){function t(){return Object(Q.a)(this,t),Object(X.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.isLoading,a=e.errorMessage,o=e.handleSubmit,c=e.submitting,i=e.pristine,s=e.addPost,u=e.history;return n?r.a.createElement(se,null):t.isAuth?r.a.createElement("div",{className:"content-container"},r.a.createElement("h2",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"),r.a.createElement("form",{onSubmit:o(function(e){return s(e).then(function(e){return"ADD_POST_SUCCESS"===e.type&&u.push("/news")})})},r.a.createElement("div",{className:"post-container"},r.a.createElement(fe.a,{component:ge,type:"text",name:"title",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",validate:Ee,key:"title"}),r.a.createElement(fe.a,{component:ve,name:"content",label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",validate:Ee,key:"content"}),a&&r.a.createElement("div",{className:"error-message"},m(a))),r.a.createElement("div",{className:"bottom-buttons"},r.a.createElement("button",{type:"submit",className:"edit-button",disabled:c||i||a},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement(q.a,{to:"/news"},r.a.createElement("button",{className:"delete-button"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"))))):r.a.createElement(ue,{message:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435"})}}]),t}(a.Component),Oe=Object(he.a)({form:"add_form"})(Ne),Se=Object(i.b)(function(e){return{user:e.user,news:e.news,errorMessage:e.error,isLoading:e.isLoading}},{addPost:function(e){return function(t){return t(G()),T.a.post("".concat(P,"/feeds"),{title:e.title,content:e.content}).then(function(e){return t((n=e.data,{type:O,payload:n}));var n}).catch(function(e){throw t(function(e){return{type:S,payload:e}}(e.response.data)),new x.a({message:e.response.data})})}}})(Oe);!function(){var e=document.createElement("script");e.src="https://apis.google.com/js/platform.js",e.onload=function(){window.gapi.load("auth2",function(){window.gapi.auth2.init({client_id:"846695237495-9suadpbnd2me10kf54j7ua2jph8prfk7.apps.googleusercontent.com"})})},document.body.appendChild(e)}(),J=Object(s.createStore)(j,{user:{userName:null,userId:null,token:null,googleToken:null,isAuth:!1},news:[],error:null,isLoading:!1,isDeleted:null},Object(s.applyMiddleware)(function(e){return function(t){return function(n){var a=U();if(a.googleToken&&window.gapi&&window.gapi.hasOwnProperty("auth2")){var r=a.userName,o=a.googleToken,c=1e3*A.a.decode(o).exp||null,i=(new Date).getTime(),s=window.gapi.auth2.getAuthInstance();return c&&i>c?s.currentUser.get().reloadAuthResponse().then(function(a){var o=a.id_token;return T.a.post("".concat(P,"/auth/google"),{token:o}).then(function(a){var c=a.data.token,i=A.a.decode(c).id;e.dispatch(M(c,o,r,i)),t(n)}).catch(function(t){return e.dispatch({type:p,payload:t})})}).catch(function(t){return e.dispatch({type:p,payload:t})}):t(n)}return t(n)}}},D.a));var ke=U();ke.token&&J.dispatch({type:"LOGIN_SUCCESS",payload:ke});var _e=function(){return r.a.createElement("div",{className:"main-container"},r.a.createElement(i.a,{store:J},r.a.createElement(K.a,{basename:"/news-react-app-frontend"},r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,null),r.a.createElement(H.a,null,r.a.createElement($.a,{exact:!0,path:"/news/add",component:Se}),r.a.createElement($.a,{exact:!0,path:"/news/:id/edit",component:we}),r.a.createElement($.a,{exact:!0,path:"/news/:id",component:pe}),r.a.createElement($.a,{exact:!0,path:"/news",component:me}),r.a.createElement($.a,{exact:!0,path:"/",component:me}),r.a.createElement($.a,{path:"*",component:ue})),r.a.createElement(ae,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[163,1,2]]]);
//# sourceMappingURL=main.4ec5faad.chunk.js.map